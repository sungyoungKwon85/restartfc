# 📄 Restart FC – 자동 라인업 생성기 PRD (Product Requirement Document)

본 문서는 Restart FC 자동 라인업 생성기를 개발·운영하기 위한 **단일 PRD 문서**입니다.  
이 `prd.md` 파일 하나로 기능, 규칙, 로직, 출력 방식 모두 관리합니다.

---

# 1. 🎮 경기 운영 규칙

## 1.1 기본 경기는 다음 조건으로 진행된다
- **4쿼터 경기**
- 쿼터당 25분 (참고 정보)
- 각 쿼터마다 **3백 또는 4백 선택 가능**
- 인원 구성:  
  - **10:10**  
  - **11:11**

## 1.2 인원수 + 시스템 조합에 따른 포메이션

| 인원수 | 4-back | 3-back |
|--------|--------|--------|
| 11명 | **4-3-3** | **3-4-3** |
| 10명 | **4-2-3** | **3-5-1** |

포메이션은 실제 배치 영역 및 배치 가능한 슬롯 수를 결정한다.

---

# 2. 🧑‍🤝‍🧑 선수 데이터 모델

각 선수는 다음 데이터를 가진다:

| 필드 | 설명 |
|------|------|
| `name` | 선수 이름 |
| `main` | 주포지션 |
| `sub1` | 서브 포지션 1 |
| `sub2` | 서브 포지션 2 |
| `present` | 참석 여부 (true/false) |
| `targetQ` | 목표 출전 쿼터 (0.5 단위) |
| `startQ` | 출전 시작 가능 쿼터 (지각 반영) |
| `endQ` | 출전 가능 종료 쿼터 (조퇴 반영) |
| `allocatedSlots` | 배정된 슬롯 수 (자동 계산) |

## 2.1 포지션 입력 방식
- 주포, 서브포지션 1, 서브포지션 2 입력 가능
- 글자 자동 대문자 변환  
- datalist를 사용해 추천 목록 제공

## 2.2 새로운 선수(용병) 추가
- UI에서 “선수 추가” 버튼으로 즉시 추가 가능
- 이름만 있으면 참여 가능  
- localStorage에 자동 저장됨

## 2.3 선수 정렬 순서
명단은 다음 우선순위에 따라 정렬된다:
GK → CB → LB → RB → DM → CM → AM → LW → RW → CF

세부 포지션은 그룹에 맞게 정렬:
- CB: `CB, LCB, RCB`
- CM: `CM, LCM, RCM`
- 측면 MF: `LW, LM, RW, RM`

---

# 3. 📦 슬롯 기반 배정 시스템

## 3.1 슬롯 정의
한 쿼터는 **전반(A)** + **후반(B)** 두 슬롯으로 구성됨.

- 1쿼터 → 슬롯 2개  
- 4쿼터 → 슬롯 8개  
- 한 슬롯 = **0.5쿼터**

예:  
`2Q-A-RB`, `2Q-B-RB`, `4Q-A-CF` …

## 3.2 슬롯 생성 규칙
1. 쿼터(1~4)
2. 전반(A) / 후반(B)
3. 해당 포메이션의 포지션 목록
4. → 각각 1개의 슬롯 생성

---

# 4. 🤖 자동 배정 알고리즘 (Greedy)

각 슬롯에 대해 가장 점수가 높은 선수를 선택하는 로직.

## 4.1 배제 조건 (점수 = -∞)
- 참석하지 않음 (`present=false`)
- 이름 없음
- 현재 쿼터가 `[startQ, endQ]` 범위 밖
- 목표 쿼터(`targetQ`)가 0 이하

## 4.2 포지션 기반 점수

| 조건 | 점수 |
|------|------|
| main 일치 | **+100** |
| sub1 일치 | +70 |
| sub2 일치 | +50 |
| 그 외(완전 어색) | +5 |

## 4.3 목표 대비 가중치
- 목표 슬롯 = `targetQ × 2`
- 남아 있는 슬롯이 많을수록 추가 점수를 줌  
  → 모든 선수의 목표 쿼터를 맞추기 위함

## 4.4 전·후반 교체 최소화 규칙 (핵심)
- B슬롯 배정 시:
  - 동일 쿼터/동일 포지션의 **A슬롯과 같은 선수면 +80점**
  - 단, 목표보다 **0.5쿼터(슬롯 1개)**까지만 초과 허용
  - → 같은 쿼터는 동일 선수가 전/후반 연속으로 뛰는 것을 선호함

→ 결과적으로 **교체 최소화 + 출전 시간 최적화**를 만족함.

---

# 5. 📋 라인업 출력

## 5.1 텍스트 테이블 출력

형식: 포지션 | 선수(전/후반)


표기 규칙:

- 전반 = 후반 → `승현`
- 다르면 → `승현/성영`
- 배정 실패 → `-`

---

## 5.2 포메이션 그라운드 뷰

각 쿼터별로 실제 경기 배치처럼 시각적으로 표시:

- 위: 공격진
- 중간: 미드필더
- 아래: 수비진
- 최하단: GK
- 칸 구성:
  - 상단: 포지션 (예: `RB`)
  - 하단: 이름 (예: `승현/성영`)

예:
    CF
 LW      RW
LCM  DM  RCM
LB LCB RCB RB 
     GK

포메이션은 쿼터별 선택된 백 시스템 + 인원수에 따라 자동 결정됨.

---

# 6. 📊 요약 정보

## 6.1 총 배정 쿼터 vs 목표 쿼터

표시 형식:
총 슬롯: X쿼터 / 목표: Y쿼터 (차이: Z쿼터)


출전 쿼터 = `allocatedSlots / 2`

---

# 7. 🧩 UX 및 저장 기능

- localStorage 사용  
  - 참석 여부  
  - 포지션  
  - 목표 쿼터  
  - 시작/종료 쿼터  
  - 새로 추가된 선수  
  → 자동 저장 / 새로고침 후에도 유지  
- 모바일 브라우저에서 홈 화면 아이콘으로 추가 가능  
- 선수 추가/삭제, 포지션 변경 즉시 반영

---

# 8. 🔧 구현된 기능 목록

- 슬롯 생성  
- 자동 배정(Greedy + weighted)  
- 전/후반 교체 최소화  
- 목표 쿼터 맞추기  
- 명단 정렬  
- 포메이션 시각화  
- 출전 통계  
- 데이터 저장(localStorage)  
- 모바일 최적화  

---

# 9. 🔮 향후 확장 가능 기능

- GK 최소 출전 보장  
- 특정 포지션 최소 출전 보장  
- 특정 쿼터 제외(예: “3Q는 무조건 안 뛴다”)  
- 교체 전략 옵션화 (최소/보통/많이)  
- 포지션 자동 제안 시스템  
- 집중 출전/분산 출전 모드 선택

---

# 10. 🗂 파일 구성 원칙

이 PRD는 다음 구조를 전제로 작성됨:

- 모든 기능은 **하나의 index.html 파일에 포함**
- 외부 JS/CSS 파일 없음
- GitHub Pages에서 그대로 실행
- PRD(`prd.md`)는 기능 정의와 요구사항 기준 문서로 활용  

---
